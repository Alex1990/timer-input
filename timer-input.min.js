!function(t,e){"function"==typeof define&&define.amd?define(e):"object"==typeof exports?module.exports=e():t.TimerInput=e()}(this,function(){"use strict";function t(t){this.type="timerinput",this.oldValue=t.oldValue,this.newValue=t.newValue}function e(t,n,i){return this instanceof e?("function"==typeof n&&(i=n,n={}),this.opts=n=o({},r,n),this.elem=t,this.lastValue=t.value,this.listeners=[],n.bindEvent&&this._bindEvent(),void(null!=i&&this.on(i))):new e(t,n,i)}var n=function(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent&&(t[e+n]=n,t.attachEvent("on"+e,t[e+n]))},i=function(t,e,n){t.removeEventListener?t.removeEventListener(e,n,!1):t.detachEvent&&t.detachEvent("on"+e,t[e+n])},s=1e3/60,l=100,r={bindEvent:!0},o=function(t){for(var e=Array.prototype.slice.call(arguments,1),n=0;n<e.length;n++)for(var i in e[n])e[n].hasOwnProperty(i)&&(t[i]=e[n][i]);return t},a=e.prototype;return a._bindEvent=function(){var t=this.elem,e=this;this._start=function(){e.start()},this._stop=function(){e.stop()},n(t,"focus",this._start),n(t,"blur",this._stop)},a.start=function(){var e=this.elem,n=this;this.timerId=setInterval(function(){n.lastValue!==e.value&&(n.trigger(new t({oldValue:n.lastValue,newValue:e.value})),n.lastValue=e.value)},s)},a.stop=function(){var t=this;setTimeout(function(){clearInterval(t.timerId)},l)},a.get=function(){return this.elem.value},a.set=function(e){var n=this.elem.value;e+="",this.elem.value=e,this.trigger(new t({oldValue:n,newValue:e})),this.lastValue=e},a.on=function(t){"function"==typeof t&&(null==this.listeners&&(this.listeners=[]),this.listeners.push(t))},a.off=function(t){null==t&&(this.listeners=[]);for(var e=0,n=this.listeners.length;n>e;e++)this.listeners[e]===t&&this.listeners.splice(e,1)},a.trigger=function(){for(var t=Array.prototype.slice.call(arguments),e=0,n=this.listeners.length;n>e;e++)this.listeners[e].apply(this.elem,t)},a.destroy=function(){clearInterval(this.timerId),this.opts.bindEvent&&(i(this.elem,"focus",this._start),i(this.elem,"blur",this._stop)),this.elem=this.timerId=this.lastValue=this._start=this._stop=this.listeners=null},e});